<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI-Enabled API Contract Quality Gate — Analysis</title>
  <meta name="description" content="Functional analysis and architecture of the AI-Enabled API Contract Quality Gate project." />
  <link rel="stylesheet" href="../assets/style.css" />
</head>
<body>
  <header class="wrap header">
    <div class="brand">
      <div class="name">Stefania Vanzetti</div>
      <div class="role">AI-enabled Business Systems Analyst</div>
    </div>

    <nav class="nav">
      <a href="../index.html">Home</a>
    </nav>
  </header>

  <main class="wrap">
    
    <section class="section">
      <h1>AI-Enabled API Contract Quality Gate</h1>
      <p class="lead">
        Functional analysis, architectural rationale, and AI integration design for the Integration Contract Validator proof of concept.
      </p>
    </section>

    <section class="section">
      <h2>Context & Business Need</h2>
    
      <p>
        In integration-heavy environments, multiple external partners interact with the company through APIs.
        Many of the values sent in API requests originate from operational user interfaces and are entered by end users
        during day-to-day work (e.g., booking details, customer data, shipping instructions, customs declaration, ...).
      </p>
    
      <p>
        After submitting a request, users typically receive a report (for example via email) confirming whether the call
        succeeded and listing any validation errors. In many real workflows, those errors are expressed in highly technical
        terms (schema/contract language), which makes them hard to interpret and slows down correction cycles.
      </p>
    
      <p>
        This Proof of Concept aims to demonstrate that by integrating an LLM into the validation process,
        technical contract errors can be translated into user-friendly messages and concrete suggestions on how to fix the input,
        reducing friction for end users and improving the overall turnaround time for integrations.
      </p>
    </section>

    <section class="section">
      <h2>Stakeholders & Users</h2>
    
      <p>
        The validation process impacts different actors across technical and operational domains:
      </p>
    
      <ul>
        <li><strong>Integration Partners:</strong> External systems calling company APIs. 
        When validation fails, they receive technical error messages that may not clearly indicate how to correct the request.</li>
    
        <li><strong>Operational End Users:</strong> Users entering data through front-end applications 
        (e.g., booking or customer details). API payloads often reflect data previously entered in a UI. 
        Technical validation errors returned via reports or emails can be difficult to interpret and act upon.</li>
    
        <li><strong>QA & Support Teams:</strong> Responsible for investigating validation failures and assisting in issue resolution. 
        Poorly interpretable errors increase analysis time and ticket volume.</li>
    
        <li><strong>Delivery & Product Stakeholders:</strong> Accountable for integration reliability and partner satisfaction. 
        Clear validation feedback directly impacts turnaround time and cross-team efficiency.</li>
      </ul>
    </section>

    <section class="section">
      <h2>High-Level Flow</h2>
    
      <p>
        The POC fits into a standard API validation workflow. The deterministic validation remains the source of truth
        (JSON Schema). The AI layer is used only to translate technical issues into user-friendly, actionable messages.
      </p>
    
      <ol>
        <li><strong>API request submitted</strong> by a partner system (values often originate from a user-facing UI).</li>
        <li><strong>Deterministic validation</strong> checks the payload against the JSON Schema contract.</li>
        <li><strong>Structured validation report</strong> is produced (technical issues, invalid values, expected constraints).</li>
        <li><strong>AI layer</strong> converts issues into structured explanations and fix suggestions (BYOK).</li>
        <li><strong>User-facing report</strong> is generated (e.g., email/notification) using the structured output.</li>
      </ol>
    
      <p class="meta">
        Note: the AI does not replace validation logic. It improves interpretability and reduces turnaround time for corrections.
      </p>
    
      <div style="margin-top:32px; display:flex; justify-content:center;">
        <div style="
            background:#0f1a2b;
            padding:32px;
            border-radius:14px;
            border:1px solid #1e2a44;
            box-shadow:0 10px 30px rgba(0,0,0,0.35);
            max-width:900px;
            width:45%;
            text-align:center;
        ">
            <img 
                src="../assets/json_validator_diagram.png"
                alt="High-level validation flow"
                style="max-width:700px; width:100%; height:auto; border-radius:8px;"
            >
        </div>
      </div>
    </section>

    <section class="section">
      <h2>Backlog structure</h2>
      <p>
        To demonstrate how this Proof of Concept would be structured in a real delivery context, below is an example of backlog decomposition into 
        Feature and Product Backlog Items (PBIs).
        The objective is to show how business needs are translated into implementable work packages with clear acceptance criteria.
      </p>

      <!-- FEATURE CARD -->
      <div class="card" style="
        margin-top: 16px;
        padding: 18px 18px;
        border: 1px solid #1e2a44;
        border-radius: 14px;
        background: rgba(18, 28, 46, 0.65);
      ">
      
        <div style="display:flex; align-items:baseline; justify-content:space-between; gap:12px; flex-wrap:wrap;">
          <h3 style="margin:0;">FEATURE — User-friendly validation feedback for integration payloads</h3>
          <span class="meta" style="margin:0;">Example backlog item</span>
        </div>
      
        <p style="margin-top:12px; margin-bottom:12px;">
          <strong>Feature goal</strong><br>
          In integration-heavy environments, multiple external partners interact with company APIs.
          Many of the values sent in API requests originate from operational user interfaces and are entered
          by end users during day-to-day activities (e.g., booking details, customer data, shipping instructions, customs declarations).
          <br><br>
          This feature aims to enhance the existing deterministic contract validation process by integrating
          an AI explanation layer capable of translating technical schema errors into structured,
          user-friendly messages and concrete correction suggestions.
        </p>
        
        <p style="margin-top:0; margin-bottom:12px;">
          <strong>Business value</strong><br>
          After submitting an API request, users typically receive a report (e.g., via email)
          confirming whether the call succeeded and listing any validation errors.
          In many real workflows, those errors are expressed in technical contract language,
          making them difficult to interpret and slowing down correction cycles.
          <br><br>
          By augmenting the validation process with structured AI explanations,
          this feature reduces friction between technical and operational teams,
          improves turnaround time for corrections,
          and increases overall integration reliability without replacing deterministic validation logic.
        </p>
      
        <p style="margin-top:0; margin-bottom:8px;"><strong>High-level Acceptance Criteria</strong></p>
      
        <pre style="
          margin: 0;
          padding: 14px;
          border-radius: 12px;
          background: rgba(10, 16, 28, 0.85);
          border: 1px solid #1e2a44;
          overflow:auto;
          white-space: pre;
        ">Feature: User-friendly validation feedback
      
        Scenario: Payload is validated and reported
          Given a JSON payload is submitted to an API
          When the payload is validated against the contract
          Then a structured validation report is produced
      
        Scenario: AI mode is enabled
          Given validation issues exist
          And AI assist is enabled
          When the AI layer processes the report
          Then user-friendly explanations and fix suggestions are generated
      
        Scenario: AI mode is disabled
          Given validation issues exist
          And AI assist is disabled
          Then the deterministic technical report is still available
        </pre>
      </div>

      <!-- PBI 01 -->
      <details style="margin-top:16px;">
        <summary style="cursor:pointer; font-weight:600; font-size:16px;">
          PBI-01 — Deterministic JSON Schema Contract Validation
        </summary>
      
        <div class="card" style="
            margin-top:12px;
            padding:18px;
            border:1px solid #1e2a44;
            border-radius:14px;
            background:rgba(18, 28, 46, 0.55);
        ">
      
          <p style="margin-top:0;">
            <strong>User Story</strong><br>
            As a delivery team member (BA, QA or developer),<br>
            I want incoming API payloads to be validated against an agreed JSON Schema contract,<br>
            So that contract violations are detected deterministically and consistently before reaching downstream systems.
          </p>
      
          <p>
            <strong>Description</strong><br>
            The system must validate JSON payloads using Draft 2020-12 JSON Schema specifications.
            Validation must be deterministic and act as the single source of truth.
            <br><br>
            When validation fails, the system must generate a normalized structured report including:
            <ul style="margin-top:6px;">
              <li>Technical error message</li>
              <li>Target path within the payload</li>
              <li>Validator type (e.g. type, minimum, enum, additionalProperties)</li>
              <li>Expected constraint</li>
              <li>Invalid value found in the payload (when available)</li>
            </ul>
            The output must be usable both for direct display and as structured input for the optional AI explanation layer.
          </p>

          <p style="margin-top:16px; margin-bottom:8px;">
            <strong>Example Output (Deterministic Validation Report)</strong>
          </p>
          
          <pre style="
              margin:0;
              padding:14px;
              border-radius:12px;
              background:rgba(10,16,28,0.9);
              border:1px solid #1e2a44;
              overflow:auto;
              white-space:pre;
          ">
          {
            "pass": false,
            "issue_count": 2,
            "issues": [
              {
                "message": "12345 is not of type 'string'",
                "target": "payload:/bookingId",
                "validator": "type",
                "expected": "string",
                "invalid_value": 12345
              },
              {
                "message": "-5 is less than the minimum of 0",
                "target": "payload:/containers/0/weightKg",
                "validator": "minimum",
                "expected": 0,
                "invalid_value": -5
              }
            ]
          }
          </pre>
          
          <p style="margin-bottom:8px;">
            <strong>Acceptance Criteria</strong>
          </p>
      
          <pre style="
              margin:0;
              padding:14px;
              border-radius:12px;
              background:rgba(10,16,28,0.9);
              border:1px solid #1e2a44;
              overflow:auto;
              white-space:pre;
          ">Feature: Deterministic contract validation

    Scenario: Payload matches schema
      Given a valid JSON Schema
      And a compliant JSON payload
      When validation is executed
      Then the field "pass" is true
      And the field "issue_count" is 0
      And the "issues" array is empty
    
    Scenario: Payload violates schema
      Given a valid JSON Schema
      And a non-compliant JSON payload
      When validation is executed
      Then the field "pass" is false
      And the field "issue_count" is greater than 0
      And each issue includes message, target, validator, expected and invalid_value when available
    
    Scenario: Validation output is exportable
      Given a validation result
      When the user requests export
      Then a structured JSON report is generated
          </pre>
      
        </div>
      </details>


      <!-- PBI 02 -->
      <details style="margin-top:16px;">
        <summary style="cursor:pointer; font-weight:600; font-size:16px;">
          PBI-02 — Strict Mode Handling (Fail on Additional Properties)
        </summary>
      
        <div class="card" style="
            margin-top:12px;
            padding:18px;
            border:1px solid #1e2a44;
            border-radius:14px;
            background:rgba(18, 28, 46, 0.55);
        ">
      
          <p style="margin-top:0;">
            <strong>User Story</strong><br>
            As a QA or integration team member,<br>
            I want to enable a strict validation mode that fails when unexpected fields are present in the payload,<br>
            So that API contract enforcement is consistent and prevents unapproved data from being accepted.
          </p>
      
          <p style="margin-bottom:10px;">
            <strong>Description</strong><br>
            The validator must support a <em>Strict mode</em> toggle.
            When Strict mode is enabled, the system must enforce <code>additionalProperties: false</code> at the root object
            (unless the schema already explicitly defines <code>additionalProperties</code>).
            When Strict mode is disabled, the schema must be used as provided (no implicit enforcement).
            <br><br>
            This capability is intended to reflect real-world integration constraints where payloads may include accidental
            extra fields originating from UI inputs, mapping layers, or partner implementations.
          </p>
      
          <p style="margin-top:0; margin-bottom:8px;">
            <strong>Example (Strict mode OFF vs ON)</strong>
          </p>
      
          <p style="margin-top:0; margin-bottom:8px;">
            The following payload includes an unexpected field (<code>unexpectedField</code>).<br>
            With <strong>Strict mode OFF</strong> and a schema that does not explicitly restrict additional properties,
            the payload may pass validation.<br>
            With <strong>Strict mode ON</strong>, the same payload must fail.
          </p>
      
          <pre style="
              margin:0 0 12px 0;
              padding:14px;
              border-radius:12px;
              background:rgba(10,16,28,0.9);
              border:1px solid #1e2a44;
              overflow:auto;
              white-space:pre;
          ">Schema (no explicit additionalProperties)
      {
        "type": "object",
        "required": ["bookingId"],
        "properties": {
          "bookingId": { "type": "string" }
        }
      }
      
      Payload (contains an extra field)
      {
        "bookingId": "ABC123",
        "unexpectedField": "should-not-be-here"
      }</pre>
      
          <pre style="
              margin:0;
              padding:14px;
              border-radius:12px;
              background:rgba(10,16,28,0.9);
              border:1px solid #1e2a44;
              overflow:auto;
              white-space:pre;
          ">Expected behavior
      - Strict mode OFF: validation will return "pass" = true (schema is used as-is)
      - Strict mode ON: validation will return "pass" = false (additionalProperties enforced at root)</pre>
      
          <p style="margin-top:16px; margin-bottom:8px;">
            <strong>Acceptance Criteria</strong>
          </p>
      
          <pre style="
              margin:0;
              padding:14px;
              border-radius:12px;
              background:rgba(10,16,28,0.9);
              border:1px solid #1e2a44;
              overflow:auto;
              white-space:pre;
          ">Feature: Strict mode handling

    Scenario: Strict mode OFF does not add extra restrictions
      Given a JSON Schema where additionalProperties is not specified for the relevant object(s)
      And Strict mode is disabled
      And the payload contains one or more additional fields
      When validation is executed
      Then the validator uses the schema as provided
      And no validation issue is raised solely due to additional properties
    
    Scenario: Strict mode ON rejects additional fields in objects
      Given a JSON Schema that defines one or more objects
      And additionalProperties is not specified for at least one of those objects
      And Strict mode is enabled
      And the payload contains an additional field inside one of those objects
      When validation is executed
      Then the field "pass" is false
      And at least one issue is returned
      And at least one issue is related to additionalProperties
    
    Scenario: Strict mode does not override explicit schema rules
      Given a JSON Schema that explicitly defines additionalProperties for specific object(s)
      And Strict mode is enabled
      When validation is executed
      Then the validator enforces the schema's additionalProperties rules as defined
      And no extra additionalProperties restrictions are implicitly added for those objects
          </pre>
      
        </div>
      </details>

    <!-- PBI 03 -->
    <details style="margin-top:16px;">
      <summary style="cursor:pointer; font-weight:600; font-size:16px;">
        PBI-03 — AI Assist (BYOK) for User-friendly Explanations & Fix Suggestions
      </summary>
    
      <div class="card" style="
          margin-top:12px;
          padding:18px;
          border:1px solid #1e2a44;
          border-radius:14px;
          background:rgba(18, 28, 46, 0.55);
      ">
    
        <p style="margin-top:0;">
          <strong>User Story</strong><br>
          As an operational end user receiving validation feedback,<br>
          I want technical contract validation errors to be translated into clear explanations and concrete fix suggestions,<br>
          So that I can correct the submitted data without requiring deep knowledge of JSON Schema or API contracts.
        </p>
    
        <p style="margin-bottom:12px;">
          <strong>Description</strong><br>
          The system must provide an optional <em>AI Assist</em> mode that generates user-friendly explanations
          and actionable fix suggestions starting from the deterministic validation report.
          <br><br>
          <strong>BYOK (Bring Your Own Key):</strong><br>
          AI Assist must require a user-provided OpenAI API key.
          The system must not store or expose any server-side API key.
          If no key is provided, AI Assist must not execute.
          <br><br>
          <strong>AI Input:</strong><br>
          The normalized validation issues produced by the deterministic validation engine
          (including target path, validator type, expected constraint and invalid value when available).
          <br><br>
          <strong>AI Output:</strong><br>
          The AI must return structured JSON containing:
          <ul style="margin-top:6px;">
            <li><code>summary</code> (short explanation of overall issues)</li>
            <li><code>top_issues</code> (array of structured issue explanations)</li>
          </ul>
          Each item in <code>top_issues</code> must include:
          <ul style="margin-top:6px;">
            <li><code>target</code> (payload pointer, e.g. <code>payload:/containers/0/weightKg</code>)</li>
            <li><code>severity</code> (<code>low</code> | <code>medium</code> | <code>high</code>)</li>
            <li><code>explanation</code> (user-friendly description of the issue)</li>
            <li><code>suggestion</code> (clear corrective action)</li>
          </ul>
          The AI output is intended to be consumed by user-facing reporting mechanisms
          (e.g., email notifications or UI feedback panels).
        </p>
    
        <p style="margin-top:0; margin-bottom:8px;">
          <strong>Example (AI Output)</strong>
        </p>
    
        <pre style="
            margin:0;
            padding:14px;
            border-radius:12px;
            background:rgba(10,16,28,0.9);
            border:1px solid #1e2a44;
            overflow:auto;
            white-space:pre;
        ">{
      "summary": "Multiple validation errors were detected in the payload.",
      "top_issues": [
        {
          "target": "payload:/containers/0/weightKg",
          "severity": "high",
          "explanation": "The field containers[0].weightKg must be >= 0 (minimum 0), but -5 was provided.",
          "suggestion": "Set weightKg to a non-negative value (e.g. 0 or greater)."
        },
        {
          "target": "payload:/bookingId",
          "severity": "medium",
          "explanation": "The field bookingId must be a string, but 12345 was provided as a number.",
          "suggestion": "Convert bookingId to a string value, e.g. \"12345\"."
        }
      ]
    }</pre>
    
        <p style="margin-top:16px; margin-bottom:8px;">
          <strong>Acceptance Criteria</strong>
        </p>
    
        <pre style="
            margin:0;
            padding:14px;
            border-radius:12px;
            background:rgba(10,16,28,0.9);
            border:1px solid #1e2a44;
            overflow:auto;
            white-space:pre;
        ">Feature: AI Assist (BYOK)
    
    Scenario: AI Assist is disabled by default
      Given the application is opened
      Then AI Assist is disabled
    
    Scenario: AI Assist requires a user-provided API key
      Given AI Assist is enabled
      And no API key is provided
      When the user executes validation
      Then AI Assist does not run
      And the deterministic validation report remains visible
    
    Scenario: AI Assist generates structured explanations
      Given AI Assist is enabled
      And a valid API key is provided
      And the deterministic validation report contains at least one issue
      When the AI Assist step is executed
      Then a structured JSON response is returned
      And the response contains "summary" and "top_issues"
    
    Scenario: AI explanation includes actionable correction
      Given AI Assist is enabled
      And a validation issue includes an invalid_value
      When the AI Assist step is executed
      Then the explanation references the invalid value when available
      And a concrete correction suggestion is provided
    
    Scenario: The API key is not exposed
      Given AI Assist is enabled
      And a user-provided API key is entered
      When the AI Assist step is executed
      Then the API key is not displayed in the UI
      And the API key is not included in any exported output
    </pre>
    
      </div>
    </details>

    </section>
  </main>
</body>
</html>
